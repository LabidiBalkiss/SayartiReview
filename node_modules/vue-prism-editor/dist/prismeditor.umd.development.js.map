{"version":3,"file":"prismeditor.umd.development.js","sources":["../src/Editor.ts"],"sourcesContent":["/* eslint-disable @typescript-eslint/explicit-module-boundary-types */\nimport { defineComponent, h } from 'vue';\n\nimport './styles.css';\nconst KEYCODE_ENTER = 13;\nconst KEYCODE_TAB = 9;\nconst KEYCODE_BACKSPACE = 8;\nconst KEYCODE_Y = 89;\nconst KEYCODE_Z = 90;\nconst KEYCODE_M = 77;\nconst KEYCODE_PARENS = 57;\nconst KEYCODE_BRACKETS = 219;\nconst KEYCODE_QUOTE = 222;\nconst KEYCODE_BACK_QUOTE = 192;\nconst KEYCODE_ESCAPE = 27;\n\nconst HISTORY_LIMIT = 100;\nconst HISTORY_TIME_GAP = 3000;\n\nconst isWindows = typeof window !== 'undefined' && navigator && /Win/i.test(navigator.platform);\nconst isMacLike = typeof window !== 'undefined' && navigator && /(Mac|iPhone|iPod|iPad)/i.test(navigator.platform);\n\nexport interface EditorProps {\n  lineNumbers: boolean;\n  autoStyleLineNumbers: boolean;\n  readonly: boolean;\n  value: string;\n  highlight: () => string;\n  tabSize: number;\n  insertSpaces: boolean;\n  ignoreTabKey: boolean;\n  placeholder: string;\n}\nexport interface Record {\n  value: string;\n  selectionStart: number;\n  selectionEnd: number;\n}\n\nexport interface History {\n  stack: Array<Record & { timestamp: number }>;\n  offset: number;\n}\n\nexport const PrismEditor = defineComponent({\n  props: {\n    lineNumbers: {\n      type: Boolean,\n      default: false,\n    },\n    autoStyleLineNumbers: {\n      type: Boolean,\n      default: true,\n    },\n    readonly: {\n      type: Boolean,\n      default: false,\n    },\n    modelValue: {\n      type: String,\n      default: '',\n    },\n    highlight: {\n      type: Function,\n      required: true,\n    },\n    tabSize: {\n      type: Number,\n      default: 2,\n    },\n    insertSpaces: {\n      type: Boolean,\n      default: true,\n    },\n    ignoreTabKey: {\n      type: Boolean,\n      default: false,\n    },\n    placeholder: {\n      type: String,\n      default: '',\n    },\n  },\n  data() {\n    return {\n      capture: true,\n      history: {\n        stack: [],\n        offset: -1,\n      } as History,\n      lineNumbersHeight: '20px',\n      codeData: '',\n    };\n  },\n  watch: {\n    modelValue: {\n      immediate: true,\n      handler(newVal: string): void {\n        if (!newVal) {\n          this.codeData = '';\n        } else {\n          this.codeData = newVal;\n        }\n      },\n    },\n    content: {\n      immediate: true,\n      handler(): void {\n        if (this.lineNumbers) {\n          this.$nextTick(() => {\n            this.setLineNumbersHeight();\n          });\n        }\n      },\n    },\n    lineNumbers(): void {\n      this.$nextTick(() => {\n        this.styleLineNumbers();\n        this.setLineNumbersHeight();\n      });\n    },\n  },\n  computed: {\n    isEmpty(): boolean {\n      return this.codeData.length === 0;\n    },\n    content(): string {\n      const result = this.highlight(this.codeData) + '<br />';\n      // todo: VNode support?\n      return result;\n    },\n    lineNumbersCount(): number {\n      const totalLines = this.codeData.split(/\\r\\n|\\n/).length;\n      return totalLines;\n    },\n  },\n  mounted() {\n    this._recordCurrentState();\n    this.styleLineNumbers();\n  },\n\n  methods: {\n    setLineNumbersHeight(): void {\n      this.lineNumbersHeight = getComputedStyle(this.$refs.pre as HTMLTextAreaElement).height;\n    },\n    styleLineNumbers(): void {\n      if (!this.lineNumbers || !this.autoStyleLineNumbers) return;\n\n      const $editor = this.$refs.pre as HTMLTextAreaElement;\n      const $lineNumbers: HTMLDivElement | null = this.$el.querySelector('.prism-editor__line-numbers');\n      const editorStyles = window.getComputedStyle($editor);\n\n      this.$nextTick(() => {\n        const btlr: any = 'border-top-left-radius';\n        const bblr: any = 'border-bottom-left-radius';\n        if (!$lineNumbers) return;\n        $lineNumbers.style[btlr] = editorStyles[btlr];\n        $lineNumbers.style[bblr] = editorStyles[bblr];\n        $editor.style[btlr] = '0';\n        $editor.style[bblr] = '0';\n\n        const stylesList = ['background-color', 'margin-top', 'padding-top', 'font-family', 'font-size', 'line-height'];\n        stylesList.forEach((style: any) => {\n          $lineNumbers.style[style] = editorStyles[style];\n        });\n        $lineNumbers.style['margin-bottom' as any] = '-' + editorStyles['padding-top' as any];\n      });\n    },\n    _recordCurrentState(): void {\n      const input = this.$refs.textarea as HTMLTextAreaElement;\n\n      if (!input) return;\n      // Save current state of the input\n      const { value, selectionStart, selectionEnd } = input;\n\n      this._recordChange({\n        value,\n        selectionStart,\n        selectionEnd,\n      });\n    },\n    _getLines(text: string, position: number): Array<string> {\n      return text.substring(0, position).split('\\n');\n    },\n    _applyEdits(record: Record): void {\n      // Save last selection state\n      const input = this.$refs.textarea as HTMLTextAreaElement;\n      const last = this.history.stack[this.history.offset];\n\n      if (last && input) {\n        this.history.stack[this.history.offset] = {\n          ...last,\n          selectionStart: input.selectionStart,\n          selectionEnd: input.selectionEnd,\n        };\n      }\n\n      // Save the changes\n      this._recordChange(record);\n      this._updateInput(record);\n    },\n    _recordChange(record: Record, overwrite = false): void {\n      const { stack, offset } = this.history;\n\n      if (stack.length && offset > -1) {\n        // When something updates, drop the redo operations\n        this.history.stack = stack.slice(0, offset + 1);\n\n        // Limit the number of operations to 100\n        const count = this.history.stack.length;\n\n        if (count > HISTORY_LIMIT) {\n          const extras = count - HISTORY_LIMIT;\n\n          this.history.stack = stack.slice(extras, count);\n          this.history.offset = Math.max(this.history.offset - extras, 0);\n        }\n      }\n\n      const timestamp = Date.now();\n\n      if (overwrite) {\n        const last = this.history.stack[this.history.offset];\n\n        if (last && timestamp - last.timestamp < HISTORY_TIME_GAP) {\n          // A previous entry exists and was in short interval\n\n          // Match the last word in the line\n          const re = /[^a-z0-9]([a-z0-9]+)$/i;\n\n          // Get the previous line\n          const previous = this._getLines(last.value, last.selectionStart).pop()?.match(re);\n\n          // Get the current line\n          const current = this._getLines(record.value, record.selectionStart).pop()?.match(re);\n\n          if (previous && current && current[1].startsWith(previous[1])) {\n            // The last word of the previous line and current line match\n            // Overwrite previous entry so that undo will remove whole word\n            this.history.stack[this.history.offset] = {\n              ...record,\n              timestamp,\n            };\n\n            return;\n          }\n        }\n      }\n\n      // Add the new operation to the stack\n      this.history.stack.push({ ...record, timestamp });\n      this.history.offset++;\n    },\n\n    _updateInput(record: Record): void {\n      const input = this.$refs.textarea as HTMLTextAreaElement;\n\n      if (!input) return;\n\n      // Update values and selection state\n      input.value = record.value;\n      input.selectionStart = record.selectionStart;\n      input.selectionEnd = record.selectionEnd;\n\n      this.$emit('update:modelValue', record.value);\n      // this.props.onValueChange(record.value);\n    },\n    handleChange(e: KeyboardEvent): void {\n      const { value, selectionStart, selectionEnd } = e.target as HTMLTextAreaElement;\n\n      this._recordChange(\n        {\n          value,\n          selectionStart,\n          selectionEnd,\n        },\n        true\n      );\n      this.$emit('update:modelValue', value);\n      // this.props.onValueChange(value);\n    },\n    _undoEdit(): void {\n      const { stack, offset } = this.history;\n\n      // Get the previous edit\n      const record = stack[offset - 1];\n\n      if (record) {\n        // Apply the changes and update the offset\n        this._updateInput(record);\n        this.history.offset = Math.max(offset - 1, 0);\n      }\n    },\n    _redoEdit(): void {\n      const { stack, offset } = this.history;\n\n      // Get the next edit\n      const record = stack[offset + 1];\n\n      if (record) {\n        // Apply the changes and update the offset\n        this._updateInput(record);\n        this.history.offset = Math.min(offset + 1, stack.length - 1);\n      }\n    },\n    handleKeyDown(e: KeyboardEvent): void {\n      // console.log(navigator.platform);\n      const { tabSize, insertSpaces, ignoreTabKey } = this;\n\n      // onKeyDown(e);\n      this.$emit('keydown', e);\n\n      if (e.defaultPrevented) {\n        return;\n      }\n\n      if (e.keyCode === KEYCODE_ESCAPE) {\n        (<HTMLTextAreaElement>e.target).blur();\n        this.$emit('blur', e);\n      }\n\n      const { value, selectionStart, selectionEnd } = e.target as HTMLTextAreaElement;\n\n      const tabCharacter = (insertSpaces ? ' ' : '\\t').repeat(tabSize);\n\n      if (e.keyCode === KEYCODE_TAB && !ignoreTabKey && this.capture) {\n        // Prevent focus change\n        e.preventDefault();\n\n        if (e.shiftKey) {\n          // Unindent selected lines\n          const linesBeforeCaret = this._getLines(value, selectionStart);\n          const startLine = linesBeforeCaret.length - 1;\n          const endLine = this._getLines(value, selectionEnd).length - 1;\n          const nextValue = value\n            .split('\\n')\n            .map((line, i) => {\n              if (i >= startLine && i <= endLine && line.startsWith(tabCharacter)) {\n                return line.substring(tabCharacter.length);\n              }\n\n              return line;\n            })\n            .join('\\n');\n\n          if (value !== nextValue) {\n            const startLineText = linesBeforeCaret[startLine];\n\n            this._applyEdits({\n              value: nextValue,\n              // Move the start cursor if first line in selection was modified\n              // It was modified only if it started with a tab\n              selectionStart: startLineText.startsWith(tabCharacter)\n                ? selectionStart - tabCharacter.length\n                : selectionStart,\n              // Move the end cursor by total number of characters removed\n              selectionEnd: selectionEnd - (value.length - nextValue.length),\n            });\n          }\n        } else if (selectionStart !== selectionEnd) {\n          // Indent selected lines\n          const linesBeforeCaret = this._getLines(value, selectionStart);\n          const startLine = linesBeforeCaret.length - 1;\n          const endLine = this._getLines(value, selectionEnd).length - 1;\n          const startLineText = linesBeforeCaret[startLine];\n\n          this._applyEdits({\n            value: value\n              .split('\\n')\n              .map((line, i) => {\n                if (i >= startLine && i <= endLine) {\n                  return tabCharacter + line;\n                }\n\n                return line;\n              })\n              .join('\\n'),\n            // Move the start cursor by number of characters added in first line of selection\n            // Don't move it if it there was no text before cursor\n            selectionStart: /\\S/.test(startLineText) ? selectionStart + tabCharacter.length : selectionStart,\n            // Move the end cursor by total number of characters added\n            selectionEnd: selectionEnd + tabCharacter.length * (endLine - startLine + 1),\n          });\n        } else {\n          const updatedSelection = selectionStart + tabCharacter.length;\n\n          this._applyEdits({\n            // Insert tab character at caret\n            value: value.substring(0, selectionStart) + tabCharacter + value.substring(selectionEnd),\n            // Update caret position\n            selectionStart: updatedSelection,\n            selectionEnd: updatedSelection,\n          });\n        }\n      } else if (e.keyCode === KEYCODE_BACKSPACE) {\n        const hasSelection = selectionStart !== selectionEnd;\n        const textBeforeCaret = value.substring(0, selectionStart);\n\n        if (textBeforeCaret.endsWith(tabCharacter) && !hasSelection) {\n          // Prevent default delete behaviour\n          e.preventDefault();\n\n          const updatedSelection = selectionStart - tabCharacter.length;\n\n          this._applyEdits({\n            // Remove tab character at caret\n            value: value.substring(0, selectionStart - tabCharacter.length) + value.substring(selectionEnd),\n            // Update caret position\n            selectionStart: updatedSelection,\n            selectionEnd: updatedSelection,\n          });\n        }\n      } else if (e.keyCode === KEYCODE_ENTER) {\n        // Ignore selections\n        if (selectionStart === selectionEnd) {\n          // Get the current line\n          const line = this._getLines(value, selectionStart).pop();\n          const matches = line?.match(/^\\s+/);\n\n          if (matches && matches[0]) {\n            e.preventDefault();\n\n            // Preserve indentation on inserting a new line\n            const indent = '\\n' + matches[0];\n            const updatedSelection = selectionStart + indent.length;\n\n            this._applyEdits({\n              // Insert indentation character at caret\n              value: value.substring(0, selectionStart) + indent + value.substring(selectionEnd),\n              // Update caret position\n              selectionStart: updatedSelection,\n              selectionEnd: updatedSelection,\n            });\n          }\n        }\n      } else if (\n        e.keyCode === KEYCODE_PARENS ||\n        e.keyCode === KEYCODE_BRACKETS ||\n        e.keyCode === KEYCODE_QUOTE ||\n        e.keyCode === KEYCODE_BACK_QUOTE\n      ) {\n        let chars;\n\n        if (e.keyCode === KEYCODE_PARENS && e.shiftKey) {\n          chars = ['(', ')'];\n        } else if (e.keyCode === KEYCODE_BRACKETS) {\n          if (e.shiftKey) {\n            chars = ['{', '}'];\n          } else {\n            chars = ['[', ']'];\n          }\n        } else if (e.keyCode === KEYCODE_QUOTE) {\n          if (e.shiftKey) {\n            chars = ['\"', '\"'];\n          } else {\n            chars = [\"'\", \"'\"];\n          }\n        } else if (e.keyCode === KEYCODE_BACK_QUOTE && !e.shiftKey) {\n          chars = ['`', '`'];\n        }\n\n        // console.log(isMacLike, \"navigator\" in global && /(Mac|iPhone|iPod|iPad)/i.test(navigator.platform));\n\n        // If text is selected, wrap them in the characters\n        if (selectionStart !== selectionEnd && chars) {\n          e.preventDefault();\n\n          this._applyEdits({\n            value:\n              value.substring(0, selectionStart) +\n              chars[0] +\n              value.substring(selectionStart, selectionEnd) +\n              chars[1] +\n              value.substring(selectionEnd),\n            // Update caret position\n            selectionStart,\n            selectionEnd: selectionEnd + 2,\n          });\n        }\n      } else if (\n        (isMacLike\n          ? // Trigger undo with ⌘+Z on Mac\n            e.metaKey && e.keyCode === KEYCODE_Z\n          : // Trigger undo with Ctrl+Z on other platforms\n            e.ctrlKey && e.keyCode === KEYCODE_Z) &&\n        !e.shiftKey &&\n        !e.altKey\n      ) {\n        e.preventDefault();\n\n        this._undoEdit();\n      } else if (\n        (isMacLike\n          ? // Trigger redo with ⌘+Shift+Z on Mac\n            e.metaKey && e.keyCode === KEYCODE_Z && e.shiftKey\n          : isWindows\n          ? // Trigger redo with Ctrl+Y on Windows\n            e.ctrlKey && e.keyCode === KEYCODE_Y\n          : // Trigger redo with Ctrl+Shift+Z on other platforms\n            e.ctrlKey && e.keyCode === KEYCODE_Z && e.shiftKey) &&\n        !e.altKey\n      ) {\n        e.preventDefault();\n\n        this._redoEdit();\n      } else if (e.keyCode === KEYCODE_M && e.ctrlKey && (isMacLike ? e.shiftKey : true)) {\n        e.preventDefault();\n\n        // Toggle capturing tab key so users can focus away\n        this.capture = !this.capture;\n      }\n    },\n  },\n  render() {\n    const lineNumberWidthCalculator = h(\n      'div',\n      {\n        class: 'prism-editor__line-width-calc',\n        style: 'height: 0px; visibility: hidden; pointer-events: none;',\n      },\n      '999'\n    );\n    const lineNumbers = h(\n      'div',\n      {\n        class: 'prism-editor__line-numbers',\n        style: {\n          'min-height': this.lineNumbersHeight,\n        },\n        'aria-hidden': 'true',\n      },\n      [\n        lineNumberWidthCalculator,\n        Array.from(Array(this.lineNumbersCount).keys()).map((_, index) => {\n          return h('div', { class: 'prism-editor__line-number token comment' }, `${++index}`);\n        }),\n      ]\n    );\n\n    const textarea = h('textarea', {\n      ref: 'textarea',\n      onInput: this.handleChange,\n      onKeydown: this.handleKeyDown,\n      onClick: ($event: MouseEvent) => {\n        this.$emit('click', $event);\n      },\n      onKeyup: ($event: KeyboardEvent) => {\n        this.$emit('keyup', $event);\n      },\n      onFocus: ($event: FocusEvent) => {\n        this.$emit('focus', $event);\n      },\n      onBlur: ($event: FocusEvent) => {\n        this.$emit('blur', $event);\n      },\n      class: {\n        'prism-editor__textarea': true,\n        'prism-editor__textarea--empty': this.isEmpty,\n      },\n      spellCheck: 'false',\n      autocapitalize: 'off',\n      autocomplete: 'off',\n      autocorrect: 'off',\n      'data-gramm': 'false',\n      placeholder: this.placeholder,\n      'data-testid': 'textarea',\n      readonly: this.readonly,\n      value: this.codeData,\n    });\n    const preview = h('pre', {\n      ref: 'pre',\n      class: 'prism-editor__editor',\n      'data-testid': 'preview',\n      innerHTML: this.content,\n    });\n    const editorContainer = h('div', { class: 'prism-editor__container' }, [textarea, preview]);\n    return h('div', { class: 'prism-editor-wrapper' }, [this.lineNumbers && lineNumbers, editorContainer]);\n  },\n});\n"],"names":["KEYCODE_ENTER","KEYCODE_TAB","KEYCODE_BACKSPACE","KEYCODE_Y","KEYCODE_Z","KEYCODE_M","KEYCODE_PARENS","KEYCODE_BRACKETS","KEYCODE_QUOTE","KEYCODE_BACK_QUOTE","KEYCODE_ESCAPE","HISTORY_LIMIT","HISTORY_TIME_GAP","isWindows","window","navigator","test","platform","isMacLike","PrismEditor","defineComponent","props","lineNumbers","type","Boolean","autoStyleLineNumbers","readonly","modelValue","String","highlight","Function","required","tabSize","Number","insertSpaces","ignoreTabKey","placeholder","data","capture","history","stack","offset","lineNumbersHeight","codeData","watch","immediate","handler","newVal","content","$nextTick","setLineNumbersHeight","styleLineNumbers","computed","isEmpty","length","result","lineNumbersCount","totalLines","split","mounted","_recordCurrentState","methods","getComputedStyle","$refs","pre","height","$editor","$lineNumbers","$el","querySelector","editorStyles","btlr","bblr","style","stylesList","forEach","input","textarea","value","selectionStart","selectionEnd","_recordChange","_getLines","text","position","substring","_applyEdits","record","last","_updateInput","overwrite","slice","count","extras","Math","max","timestamp","Date","now","re","previous","pop","match","current","startsWith","push","$emit","handleChange","e","target","_undoEdit","_redoEdit","min","handleKeyDown","defaultPrevented","keyCode","blur","tabCharacter","repeat","preventDefault","shiftKey","linesBeforeCaret","startLine","endLine","nextValue","map","line","i","join","startLineText","updatedSelection","hasSelection","textBeforeCaret","endsWith","matches","indent","chars","metaKey","ctrlKey","altKey","render","lineNumberWidthCalculator","h","Array","from","keys","_","index","ref","onInput","onKeydown","onClick","$event","onKeyup","onFocus","onBlur","spellCheck","autocapitalize","autocomplete","autocorrect","preview","innerHTML","editorContainer"],"mappings":"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"}